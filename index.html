<!DOCTYPE html>
<html lang="PT-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Pagina principal NC NEWS</title>
    <link rel="shortcut icon" href="img/logo.webp" type="image/x-icon">

    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" href="css/style_menu.css">
    <link rel="stylesheet" href="css/style_musicas.css">
    <script src="js/menus.js" defer></script>
    <script src="https://unpkg.com/wavesurfer.js"></script>
</head>

<body>
    <div class="container2">  <!--  <<<<<--style_musicas -->
        <div class="divfr">  <!-- LOGO CYBERPUNK -->
            <a href="index.html" class="logo"> <img src="img/Cb2077.png" id="NCTlogo"> </a>
        </div>
        
        <div class="divfr">   <!-- FAIXA DE MÚSICA -->
                <div class="hero">  
                    <div class="music">
                        <img src="img/musicas/fotomusica.jfif" alt="Carregando" id="imgMusica">
                        <div class="info">
                            <h2 id="nomemusica">Cyberpunk 2077 - Theme music (1/7)</h2>
                
                            <div id="waveform"></div>
                
                            <div class="controls">
                                <img src="img/musicas/play.png" alt="Play" id="playBtn">
                                <img src="img/musicas/previous.png" alt="Pause" id="previousBtn" style="width: 0.8vw;" class="espaco">
                                <img src="img/musicas/stop.png" alt="Pause" id="stopBtn">
                                <img src="img/musicas/next.png" alt="Pause" id="nextBtn" style="width: 0.8vw;">
                                

                                <img src="img/musicas/volume.png" alt="Volume" id="volumeBtn" class="espaco">
                                <img src="img/musicas/minus.png" alt="Minus" id="minusBtn">
                                <progress id="progresso" value="0.05" max="0.1" style="margin-right: 1vw; width: 10vw;"></progress>
                                <img src="img/musicas/plus.webp" alt="Plus" id="plusBtn">
                            </div>
                        </div>
                    </div>
                </div>
        </div>

        <div class="divfr">  <!-- MENU INTERATIVO -->
            <ul class="navbar_menu">  
                <li class="navbar_item">
                    <a href="index.html">Home</a>
                </li>
                <li class="navbar_item">
                    <a href="#" class="dropdown">Menu</a>
                    <div class="submenu">  <!-- MENU DROPDOWN -->
                        <img src="img/menufoto.jpg" alt="Imagem">
                        <div class="submenu_itens">
                            <div class="submenu_item" onclick="location.href='#sec';">
                              
                                <h4>Sobre</h4>
                            </div>
                            <div class="submenu_item" onclick="location.href='Explorar.html';">
                                
                                <h4>Explorar</h4>
                            </div>
                            <div class="submenu_item" onclick="location.href='Mapa.html';">
                               
                                <h4>Mapa</h4>
                            </div>
                            <div class="submenu_item" onclick="location.href='AreaCadastro.php';">
                              
                                <h4>Cadastro</h4>
                            </div>
                            <div class="submenu_item" onclick="location.href='Arquivo.html';">
                                
                                <h4>Verificar arquivo</h4>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="navbar_item">
                    <a href="https://www.cyberpunk.net/us/pt-br/" target="_blank">Official Site</a>
                </li>
            </ul>
        </div>
    </div>


    <section>  <!-- Efeito Parallax -->
        <img src="img/galaxy_effects.png" id="stars">
        <img src="img/city.png" id="city" z-index>
        <img src="img/city_front.png" id="city_front">
        <!--<h2 id="Text">Bem vindo a nigth city!</h2>-->
    </section>


    <div class="sec" id="sec">
        <h2>BEM VINDO A NIGHT CITY !</h2>
        <p>E bem vindo a cidade na beira do Amanhã! Uma cidade totalmente autonoma e 
            considerada uma metropolis mundial, não existe nada melhor que Night City. Criada nos últimos anos do século 
            XX pelo nobre Richad Night, Night City nasceu como uma cidade do futuro. Com o apoio de grandes corporações com a 
            ARASAKA Corporation, Night City cresceu íncrivelmente até 2020. Porém em 2020 um ataque terrorista liderado
            pelo famoso Rockerboy Johnny Silverhand e direcionado as torres ARASAKA acabou por deixar todo o centro da 
            cidade em ruínas, sendo então o período RED iniciado (com o nome sendo dado a essa época
            devido a famosa cor vermelha constantemente observada no céu de NC como consequência das
            bombas nucleares utilizadas no ataque). Porém nada em Night City realmente acaba, e graças ao trabalho
            das grandes corporações e o incanssável esforço do governo de Night City, a cidade finalmente se encontra 
            em um caminho de crescimento, com a sua população crescendo cada vez mais, 
            e sempre com uma oportunidade dísponível na cidade!! Então o que você está esperando, venha para Night City
            e descubre o que é morar na beira do Amanhã! </p>
            <p>&nbsp;</p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
        <iframe width=100% height=720 src="https://www.youtube.com/embed/8X2kIfS6fb8?version=3&loop=1&mute=1&autoplay=1&playlist=8X2kIfS6fb8">
        </iframe>  
    </div>

    <footer style="background-color: dark-blue; text-align: center; margin: 10px;">
        <strong><h3>Criado por: Dimitri, Guilherme Ginack, Luigi e Natan</h3></strong>
    </footer>
    

    <script>  /* Efeito Paralax */
        let stars = document.getElementById('stars');
        let city = document.getElementById('city');
        let city_front = document.getElementById('city_front');
        let header = document.querySelector('header');

        window.addEventListener('scroll', function(){
            let value = window.scrollY; 
            stars.style.left = value * 0.25 + 'px';
            city.style.top = value * 0.5 + 'px';
            city_front.style.top = value * 0 + 'px';
            header.style.top = value * 0.5 + 'px';
        })
    </script>

    <script>  /* Script da música */
        /* const myTimeout = setTimeout(playF, 4000); */
        var playBtn = document.getElementById("playBtn")  /* Declarando variáveis dos controles do áudio */
        var stopBtn = document.getElementById("stopBtn")
        var volumeBtn = document.getElementById("volumeBtn")
        var plusBtn = document.getElementById("plusBtn")
        var minusBtn = document.getElementById("minusBtn")
        var nextBtn = document.getElementById("nextBtn")
        var previousBtn = document.getElementById("previousBtn")

        let volumeM = 0.05;

        var wavesurfer = WaveSurfer.create({
            container: '#waveform',
            waveColor: 'yellow',
            progressColor: 'cyan',
            barWidth: 4,
            height: 50,
            resposive: true,
            hideScrollbar: true,
            barRadius: 4,
        });  /* declarando função wavesurfer */

        playBtn.onclick = function() { /* função PLAY/PAUSE */
            playF();
        }
        function playF() {
                wavesurfer.playPause();
            if(playBtn.src.includes("img/musicas/play.png")) {
                playBtn.src = "img/musicas/pause.png";
            } else {
                playBtn.src = "img/musicas/play.png";
            }
        }
        stopBtn.onclick = function() {  /* função STOP */
            wavesurfer.stop();
            playBtn.src = "img/musicas/play.png";
        }
        volumeBtn.onclick = function() {  /* função MUTAR */
            wavesurfer.toggleMute();
            if(volumeBtn.src.includes("volume.png")) {
                volumeBtn.src = "img/musicas/mute.png";
            } else {
                volumeBtn.src = "img/musicas/volume.png";
            }
        }
        wavesurfer.setVolume(volumeM);
        minusBtn.onclick = function() {  /* função AUMENTAR */
            if(volumeM > 0.005) {
                volumeM -= 0.01;
            } else {
                alert('Volume mínimo!');
            }
            wavesurfer.setVolume(volumeM);
            document.getElementById("progresso").value = volumeM;
        }
        plusBtn.onclick = function() {  /* função DIMINUIR */
            if(volumeM < 0.095) {
                volumeM += 0.01;
                if (volumeM > 0.095) {
                    volumeM = 0.1;
                }
            } else {
                alert('Volume máximo!');
            }
            document.getElementById("progresso").value = volumeM;
            wavesurfer.setVolume(volumeM);
        }
        wavesurfer.on('finish', function () {  /* função termina a música */
            playBtn.src = "img/musicas/play.png"
            nextF();
        });


        /*  Playlist */

        let proximamusica = 0;
        let firstmusica = 0;
        let imgMus;

        if (firstmusica == 0) {
                wavesurfer.load('media/Hyper-SpoilerCyberpunk2077.mp3');
            }

        var matrizPlaylist = ['Cyberpunk 2077 - Theme music', 'Maelstrom Combat Theme', 'Max Brhon - Cyberpunk', 'Militech Combat Theme', 'NCPD Combat Theme', 'The Rebel Path', 'Valentinos Combat Theme'];  /* Nome das músicas */

        nextBtn.onclick = function() {
            nextF();
        }
        function nextF() {    /* função next */
            playBtn.src = "img/musicas/play.png";

            if (proximamusica == 6) {
                proximamusica = 0;
                firstmusica += 1;
            } else {
                proximamusica += 1;
            }
            document.getElementById('nomemusica').innerHTML = ''+ matrizPlaylist[proximamusica] + ' (' + (proximamusica+1) + '/7)';

            playlist_musica()
        }
        previousBtn.onclick = function() {    /* função previous */
            playBtn.src = "img/musicas/play.png";

            if (proximamusica == 0) {
                proximamusica = 6;
                firstmusica += 1;
            } else {
                proximamusica -= 1;
            }
            document.getElementById('nomemusica').innerHTML = ''+ matrizPlaylist[proximamusica]  + ' (' + (proximamusica+1) + '/7)';

            playlist_musica()
        }

        function playlist_musica() {  /* Locais das músicas */
            if (proximamusica == 0) {
                wavesurfer.load('media/Hyper-SpoilerCyberpunk2077.mp3');
                imgMus = 'img/musicas/fotomusica.jfif';
            } else if (proximamusica == 1) {
                wavesurfer.load('media/Maelstrom Combat Theme.mp3');
                imgMus = 'img/musicas/img1.png';
            } else if (proximamusica == 2){
                wavesurfer.load('media/Max Brhon - Cyberpunk.mp3');
                imgMus = 'img/musicas/img7.jfif';
            } else if (proximamusica == 3){
                wavesurfer.load('media/Militech Combat Theme.mp3');
                imgMus = 'img/musicas/img2.webp';
            } else if (proximamusica == 4){
                wavesurfer.load('media/NCPD Combat Theme.mp3');
                imgMus = 'img/musicas/img3.webp';
            } else if (proximamusica == 5){
                wavesurfer.load('media/The Rebel Path.mp3');
                imgMus = 'img/musicas/img4.jfif';
            } else if (proximamusica == 6){
                wavesurfer.load('media/Valentinos Combat Theme.mp3');
                imgMus = 'img/musicas/img5.jpg';
            }  
            document.getElementById("imgMusica").src = imgMus; 
            const myTimeout2 = setTimeout(playF, 3000);
        }  /* Se adicionar música, mude o parâmetro proximamusica nas funçoes previous e next */
    </script>

</body>
</html>